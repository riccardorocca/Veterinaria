<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Abdomen de Perro</title> <!-- Nombre que queremos que salga en la pestaña del navegador -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>
  <iframe style="position:fixed; width:100%; height:100%; border:0" src="" id="api-frame"
    sandbox="allow-scripts allow-same-origin allow-popups allow-forms" allow="autoplay; fullscreen; vr" allowvr
    allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>

  <div class="img-container1"><img src="./img/boton-vet-ucm.png"></div>

  <div class="labelsLeft"> <!--Estos son los botones que salen a la dch de la pantalla -->
    <label class="labelPick" id="labelPick" >clic en un órgano...</label>
    <label class="labelNote" id="labelNote" ></label>
  </div>

  <div class="labelsRight"> <!--Estos son los botones que salen a la dch de la pantalla -->
    <button id="buttonA"><span class="material-symbols-outlined">rotate_90_degrees_cw</span></button>
    <button id="buttonB"><span class="material-symbols-outlined">rotate_90_degrees_ccw</span></button>
    <button id="buttonC"><span class="material-symbols-outlined">info</span></button>
    <br>
    <br><input class="check1" type="checkbox" id="keyX" onclick="showAndHide('keyX')" checked> <label for="keyX"></label>
    <br><input class="check1" type="checkbox" id="key1" onclick="showGroup('key1')" checked> <label for="key1">Exploración</label>
    <br><input class="check1" type="checkbox" id="keyA" onclick="showAndHide('keyA')" checked> <label for="keyA"></label>

    <p><input class="check1" type="checkbox" id="key2" onclick="showGroup('key2')" checked> <label for="key2">Aparato Digestivo</label>
      <br><input class="check2" type="checkbox" id="keyB" onclick="showAndHide('keyB')" checked> <label for="keyB"></label>
      <br><input class="check2" type="checkbox" id="keyC" onclick="showAndHide('keyC')" checked> <label for="keyC"></label>
      <br><input class="check2" type="checkbox" id="keyD" onclick="showAndHide('keyD')" checked> <label for="keyD"></label>
      <br><input class="check2" type="checkbox" id="keyE" onclick="showAndHide('keyE')" checked> <label for="keyE"></label>
      <br><input class="check2" type="checkbox" id="keyF" onclick="showAndHide('keyF')" checked> <label for="keyF"></label>
      <br><input class="check2" type="checkbox" id="keyH" onclick="showAndHide('keyH')" checked> <label for="keyH"></label>
      <br><input class="check2" type="checkbox" id="keyG" onclick="showAndHide('keyG')" checked> <label for="keyG"></label>
      <br><input class="check2" type="checkbox" id="keyI" onclick="showAndHide('keyI')" checked> <label for="keyI"></label>
      <br><input class="check2" type="checkbox" id="keyJ" onclick="showAndHide('keyJ')" checked> <label for="keyJ"></label>
      <br><input class="check2" type="checkbox" id="keyK" onclick="showAndHide('keyK')" checked> <label for="keyK"></label>

    <p><input class="check1" type="checkbox" id="key5" onclick="showGroup('key5')" checked> <label for="key5">Sistema Endocrino</label>
      <br><input class="check2" type="checkbox" id="keyV" onclick="showAndHide('keyV')" checked> <label for="keyV"></label>
      <br><input class="check2" type="checkbox" id="keyW" onclick="showAndHide('keyW')" checked> <label for="keyW"></label>

    <p><input class="check1" type="checkbox" id="key4" onclick="showGroup('key4')" checked> <label for="key4">Aparato Circulatorio</label>
      <br><input class="check2" type="checkbox" id="keyP" onclick="showAndHide('keyP')" checked> <label for="keyP"></label>
      <br><input class="check2" type="checkbox" id="keyR" onclick="showAndHide('keyR')" checked> <label for="keyR"></label>
      <br><input class="check2" type="checkbox" id="keyT" onclick="showAndHide('keyT')" checked> <label for="keyT"></label>
      <br><input class="check2" type="checkbox" id="keyU" onclick="showAndHide('keyU')" checked> <label for="keyU"></label>

    <p><input class="check1" type="checkbox" id="key3" onclick="showGroup('key3')" checked> <label for="key3">Aparato Urinario</label>
      <br><input class="check2" type="checkbox" id="keyL" onclick="showAndHide('keyL')" checked> <label for="keyL"></label>
      <br><input class="check2" type="checkbox" id="keyM" onclick="showAndHide('keyM')" checked> <label for="keyM"></label>
      <br><input class="check2" type="checkbox" id="keyN" onclick="showAndHide('keyN')" checked> <label for="keyN"></label>
      <br><input class="check2" type="checkbox" id="keyO" onclick="showAndHide('keyO')" checked> <label for="keyO"></label>

  </div>

  <div class="img-container2"><img src="./img/logo-ucm.png"></div>


<!-------------------------------------------------------------------------------------------------------------------------------------------------->
<!-- SCRIPT -->
<!-------------------------------------------------------------------------------------------------------------------------------------------------->
  <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.5.1.js"></script>
  <script>
    const model = '7b80b3644c5449db8aa1a1fdd3a58cc3'; // Modelo de referencia a Sketchfab,este fichero cuando lo abres irá al modelo de ese código

    //Redefine los dos botones
    const buttonA = document.getElementById( 'buttonA' );
    const buttonB = document.getElementById( 'buttonB' );
    const buttonC = document.getElementById( 'buttonC' );

    var azimuth; //variable global para pasar el resultado de la función getAzimuth()

    //Objeto para recoger las correspondencias entre nombres, nodos y botones
    const listedKeys = {};
    listedKeys['keyA'] = { kGroup: 'keyA', Name: 'Esqueleto', nodeName: 'Esqueleto', Note: '' };

    listedKeys['keyB'] = { kGroup: 'key2', Name: 'Esófago', nodeName: 'Esofago', Note: '' };
    listedKeys['keyC'] = { kGroup: 'key2', Name: 'Estómago', nodeName: 'Estomago', Note: 'Si el hígado es normal y el estómago está vacío, no se puede palpar.<p>Cuando se coloca al perro en posición bípeda, el estómago desciende ligeramente y a veces se palpa.' };
    listedKeys['keyD'] = { kGroup: 'key2', Name: 'Duodeno', nodeName: 'Duodeno', Note: 'Intestino delgado y grueso.<p>Se palpa en todo el abdomen.<p>Animal sano: Asas intestinales blandas, con contenido intestinal y gas en su interior.<p>Colon: Se localiza en mesogastrio e hipogastrio dorsal y medial. Su pared es más firme que la del intestino delgado.<p>La exploración es sistemática de epigastrio a hipogastrio.' };
    listedKeys['keyE'] = { kGroup: 'key2', Name: 'Yeyuno', nodeName: 'Yeyuno', Note: 'Intestino delgado y grueso.<p>Se palpa en todo el abdomen.<p>Animal sano: Asas intestinales blandas, con contenido intestinal y gas en su interior.<p>Colon: Se localiza en mesogastrio e hipogastrio dorsal y medial. Su pared es más firme que la del intestino delgado.<p>La exploración es sistemática de epigastrio a hipogastrio.' };
    listedKeys['keyF'] = { kGroup: 'key2', Name: 'Íleon', nodeName: 'Ileon', Note: 'Intestino delgado y grueso.<p>Se palpa en todo el abdomen.<p>Animal sano: Asas intestinales blandas, con contenido intestinal y gas en su interior.<p>Colon: Se localiza en mesogastrio e hipogastrio dorsal y medial. Su pared es más firme que la del intestino delgado.<p>La exploración es sistemática de epigastrio a hipogastrio.' };
    listedKeys['keyG'] = { kGroup: 'key2', Name: 'Colon', nodeName: 'Colon', Note: 'Intestino delgado y grueso.<p>Se palpa en todo el abdomen.<p>Animal sano: Asas intestinales blandas, con contenido intestinal y gas en su interior.<p>Colon: Se localiza en mesogastrio e hipogastrio dorsal y medial. Su pared es más firme que la del intestino delgado.<p>La exploración es sistemática de epigastrio a hipogastrio.' };
    listedKeys['keyH'] = { kGroup: 'key2', Name: 'Ciego', nodeName: 'Ciego', Note: 'Intestino delgado y grueso.<p>Se palpa en todo el abdomen.<p>Animal sano: Asas intestinales blandas, con contenido intestinal y gas en su interior.<p>Colon: Se localiza en mesogastrio e hipogastrio dorsal y medial. Su pared es más firme que la del intestino delgado.<p>La exploración es sistemática de epigastrio a hipogastrio.' };
    listedKeys['keyI'] = { kGroup: 'key2', Name: 'Hígado', nodeName: 'Higado', Note: 'Se localiza dentro del arco costal, algo hacia la derecha.<p>En condiciones normales no se puede palpar.<p>Hepatomegalia: Sobresale del arco costal sobre todo en el epigastrio derecho.' };
    listedKeys['keyJ'] = { kGroup: 'key2', Name: 'Vesícula Biliar', nodeName: 'Vesicula Biliar', Note: '' };
    listedKeys['keyK'] = { kGroup: 'key2', Name: 'Páncreas', nodeName: 'Pancreas', Note: 'No se palpa, incluso en condiciones patológicas.<p>Pancreatitis: Se encuentra una importante defensa abdominal.' };

    listedKeys['keyL'] = { kGroup: 'key3', Name: 'Riñones', nodeName: 'Rinones', Note: 'Son retroperitoneales.<p>El riñón derecho es algo más craneal.<p>En la mayoría de los perros el derecho está debajo del arco costal.<p>En perro, sólo se suele palpar la parte más caudal del riñón izquierdo.<p>En gato, se pueden palpar ambos riñones.' };
    listedKeys['keyM'] = { kGroup: 'key3', Name: 'Uréteres', nodeName: 'Ureteres', Note: '' };
    listedKeys['keyN'] = { kGroup: 'key3', Name: 'Vejiga', nodeName: 'Vejiga', Note: 'Se localiza en el hipogástrico.<p>Su posición varía según el grado de llenado (más craneal).<p>La palpación se hace con una sola mano ventralmente.<p>En perros grandes se usan las dos manos.<p>La exploración se realiza de dorsal a ventral.' };
    listedKeys['keyO'] = { kGroup: 'key3', Name: 'Uretra', nodeName: 'Uretra', Note: '' };

    listedKeys['keyP'] = { kGroup: 'key4', Name: 'Arteria Aorta', nodeName: 'Arteria Aorta', Note: '' };
    listedKeys['keyQ1'] = { kGroup: 'key4', Name: 'Arteria Celíaca', nodeName: 'Arteria Celiaca', Note: '' };
    listedKeys['keyQ3'] = { kGroup: 'key4', Name: 'Arteria Ilíaca Externa', nodeName: 'Arteria Iliaca Externa', Note: '' };
    listedKeys['keyQ4'] = { kGroup: 'key4', Name: 'Arteria Ilíaca Interna', nodeName: 'Arteria Iliaca Interna', Note: '' };
    listedKeys['keyQ2'] = { kGroup: 'key4', Name: 'Art. Cicunfl. Ilíaca Profun.', nodeName: 'Arteria Iliaca Profunda', Note: '' };
    listedKeys['keyQ5'] = { kGroup: 'key4', Name: 'Art. Mesentérica Caudal', nodeName: 'Arteria Mesenterica Caudal', Note: '' };
    listedKeys['keyQ6'] = { kGroup: 'key4', Name: 'Art. Mesentérica Craneal', nodeName: 'Arteria Mesenterica Craneal', Note: '' };
    listedKeys['keyQ7'] = { kGroup: 'key4', Name: 'Arteria Renal', nodeName: 'Arteria Renal', Note: '' };
    listedKeys['keyQ8'] = { kGroup: 'key4', Name: 'Arteria Testicular', nodeName: 'Arteria Testicular', Note: '' };
    listedKeys['keyR'] = { kGroup: 'key4', Name: 'Vena Cava', nodeName: 'Vena Cava', Note: '' };
    listedKeys['keyS1'] = { kGroup: 'key4', Name: 'Vena Renal', nodeName: 'Vena Renal', Note: '' };
    listedKeys['keyS2'] = { kGroup: 'key4', Name: 'Vena Ilíaca Externa', nodeName: 'Vena Iliaca Externa', Note: '' };
    listedKeys['keyS3'] = { kGroup: 'key4', Name: 'Vena Ilíaca Interna', nodeName: 'Vena Iliaca Interna', Note: '' };
    listedKeys['keyT'] = { kGroup: 'key4', Name: 'Vena Porta', nodeName: 'Vena Porta', Note: '' };
    listedKeys['keyU'] = { kGroup: 'key4', Name: 'Nódulos Linfáticos', nodeName: 'Nodulos Linfaticos', Note: 'Se palpan cuando hay un aumento de tamaño considerable.' };

    listedKeys['keyV'] = { kGroup: 'key5', Name: 'Glándulas Adrenáles', nodeName: 'Glandulas Adrenales', Note: '' };
    listedKeys['keyW'] = { kGroup: 'key5', Name: 'Bazo', nodeName: 'Bazo', Note: 'Dentro del arco costal.<p>En condiciones normales no se puede palpar.<p>Esplenomegalia: Se puede palpar en el mesogastrio medial y ventral.' };

    listedKeys['keyX'] = { kGroup: 'keyX', Name: 'Perro', nodeName: 'Perro', Note: '' };
    listedKeys['keyY1'] = { kGroup: 'key1', Name: 'Planos', nodeName: 'Planos', Note: '' };
    listedKeys['keyY2'] = { kGroup: 'key1', Name: 'Epigastrio', nodeName: 'TEpigastrio', Note: '' };
    listedKeys['keyY3'] = { kGroup: 'key1', Name: 'Hipogastrio', nodeName: 'THipogastrio', Note: '' };
    listedKeys['keyY4'] = { kGroup: 'key1', Name: 'Mesogastrio', nodeName: 'TMesogastrio', Note: '' };

    // Rellena el objeto "labelsFor" con las referencias HTML de las etiquetas "label for="
    const labelsFor = {};
    const labelsHTML = document.getElementsByTagName("label");
    for (var i = 0; i < labelsHTML.length; i++) {
        labelsFor[labelsHTML[i].getAttribute("for")] = i;
    };

    // Inserta en cada etiqueta de un órgano, el nombre del órgano mismo
    for (var key in listedKeys) {
      var index = labelsFor[key];
      if (index) { labelsHTML[index].innerText = listedKeys[key].Name; }
    }

    const listedNodes = {};   // Objeto para guardar todos los nodos, también los que tienen el mismo nombre
    const idNodes = {}; // Objeto para guardar los ID de los nodos
    let apiRef; // Referencia a la api, para poder llamarla fuera del evetListener

    //INICIO Sketchfab
    //Asi se llama a la versión de api que esté actualmente
    iframe = document.getElementById('api-frame');
    client = new Sketchfab( iframe);

    error = function () {
      console.error('Sketchfab API Error!');
    },

    success = function (api) {
      apiRef = api; //Aquí ya estamos nombrando a la variable creada por nosotros
                    //para poder usarla fuera de lo de Sketchfab
      api.start();
      // Wait for viewer to be ready
      api.addEventListener('viewerready', function () {
        // Get the object nodes
        api.getNodeMap(function (err, nodes) {
          if (!err) {
            for ( const prop in nodes ) {
              if ( nodes.hasOwnProperty( prop ) ) {
                const name = nodes[ prop ].name;
                const type = nodes[ prop ].type;
                const baseName = name.split('_')[0]; //Nombre base, sin nombre de testura (_...)

                listedNodes[prop] = baseName;
                if (name == baseName && type === "MatrixTransform") {
                  idNodes[name] = nodes[prop].instanceID;
                }
              };
            };

            //Deselecciona algunos botones
            document.getElementById('keyX').checked = false; showAndHide('keyX');
            document.getElementById('key1').checked = false; showGroup('key1')

            //Bucle: cada 0.5 secundos comprueba la orientación de la vista y, si es el caso, da la vuelta a las tre etiquetas
            setInterval(function() {
              getAzimuth();
              if ( azimuth>=-1.6268 && azimuth<=1.5081 ) {orientation = -Math.PI/2}
              else                                     {orientation = Math.PI/2};
              node = idNodes[listedKeys['keyY2'].nodeName]
              api.rotate(node, [orientation, 0, 1, 0], {duration: 0, easing: 'easeOutQuad'});
              node = idNodes[listedKeys['keyY3'].nodeName]
              api.rotate(node, [orientation, 0, 1, 0], {duration: 0, easing: 'easeOutQuad'});
              node = idNodes[listedKeys['keyY4'].nodeName]
              api.rotate(node, [orientation, 0, 1, 0], {duration: 0, easing: 'easeOutQuad'});
            }, 500); //time interval = 500 ms

          };
        });

        function getAzimuth() {
          api.getCameraLookAt(function(err, camera) {
            var Cx = camera.position[0];
            var Cy = camera.position[1];
            var Tx = camera.target[0];
            var Ty = camera.target[1];
            azimuth = Math.atan2(Cy-Ty, Cx-Tx);
          });
        }

        var XYZa = []; //Punto "desde" para las vistas anterior, derecha, posterior, izquierda
        XYZa.push([-0.1005,-1.0608,0.0323]);
        XYZa.push([-1.0531,0.2235,0.0261]);
        XYZa.push([0.0573,0.9718,0.1820]);
        XYZa.push([1.1072,-0.1350,0.2085]);

        var XYZb = []; //Punto "desde" para las vistas anterior, derecha, posterior, izquierda
        XYZb.push([0.0040,0.0552,0.0147]);
        XYZb.push([0.0492,0.0199,0.0202]);
        XYZb.push([0.0037,-0.0271,0.0165]);
        XYZb.push([-0.1017,0.0327,-0.0062]);

        //Al abrirse el modelo, pone la vista estandar del lado izquierdo
        api.setCameraLookAt(XYZa[3], XYZb[3], 2);

        //Hace girar la cámara 90º en sentido horario, mirando hacia el lado izquierdo, posterior, derecho o frontal
        //Primero comprueba en qué sector se encuentra, luego gira al siguiente
        buttonA.addEventListener( 'click', function() {
          getAzimuth();

          //convierte el azimuth de la cámara en un índice de vista: 0=posterior, 1=izquierda, 2=anterior, 3=derecha
          let XYZi = Math.round((Math.PI-azimuth)/(Math.PI/2))-1;
          if (XYZi == -1) {XYZi = 3}

          if (XYZi < 3) { XYZi ++ }
          else          { XYZi = 0 };
          api.setCameraLookAt(XYZa[XYZi], XYZb[XYZi], 2);
        });

        //Hace girar la cámara 90º en sentido antihorario, mirando hacia el lado izquierdo, frontal, derecho o posterior
        //Primero comprueba en qué sector se encuentra, luego gira al siguiente sector
        buttonB.addEventListener( 'click', function() {
          getAzimuth();
          let XYZi = Math.round((Math.PI-azimuth)/(Math.PI/2))-1;
          if (XYZi == -1) {XYZi = 3}

          if (XYZi > 0) { XYZi -- }
          else          { XYZi = 3 };
          api.setCameraLookAt(XYZa[XYZi], XYZb[XYZi], 2);
        });
/*
        //Uso alternativo del boton B, para mostrar coordenadas y azimuth de la cámara
        buttonB.addEventListener( 'click', function() {
          api.getCameraLookAt(function(err, camera) {
            var Cx = camera.position[0];
            var Cy = camera.position[1];
            var Tx = camera.target[0];
            var Ty = camera.target[1];
            var azimuth = Math.atan2(Cy-Ty, Cx-Tx);
            if (win) {win.close()};
            var win = window.open("", "Title", "toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=400,height=20,top="+(screen.height/2)+",left="+(screen.width/2-200));
            win.document.body.innerHTML = camera.position[0].toFixed(4)+","+camera.position[1].toFixed(4)+","+camera.position[2].toFixed(4)+"\n"+camera.target[0].toFixed(4)+","+camera.target[1].toFixed(4)+","+camera.target[2].toFixed(4)+"\n"+azimuth.toFixed(4);
          });
        });
*/

        //Abre una ventana con informaciones
        buttonC.addEventListener( 'click', function() {
          alert("Modelo 3D \"Abdomen de perro\"\n"+
                "Facultad de Veterinaria - Universidad Complutense de Madrid\n\n"+
                "Controles con el ratón:\n"+
                "- boton izquierdo: gira el modelo\n"+
                "- boton mediano: desplaza el modelo\n"+
                "- rueda mediana: zoom\n"+
                "- clic en un órgano: muestra el nombre del órgano\n"+
                "- doble clic en un órgano: lo convierte en el pivote del modelo\n"+
                "- clic en botones de giro: giran el modelo hacia 4 vistas estandar\n"+
                "- opciones del menú: encienden/apagan un órgano o grupo de órganos"
              );
        });

        //Código para mostrar el nombre de un órgano cuando se clica en él
        api.addEventListener('click', function(info) {
          if (info.instanceID === null) {
            document.getElementById('labelPick').innerHTML = 'clic en un órgano...';
            document.getElementById('labelNote').innerHTML = '';
          }
          else {
            const node = listedNodes[info.instanceID];
            for (kBox in listedKeys) {
              if (listedKeys[kBox].nodeName == node) {
                Name = listedKeys[kBox].Name;
                Note = listedKeys[kBox].Note;
                document.getElementById('labelPick').innerHTML = Name;
                if (Note != '') { document.getElementById('labelNote').innerHTML = '<hr>' + Note; }
                else            { document.getElementById('labelNote').innerHTML = ''; }
              }
            }
          }
        },
        { pick: 'slow' });

      });
    };

    client.init(model, {
      success: success,
      error: error,
      ui_infos: 0,
      ui_controls: 0,
      ui_stop: 1,
      watermark: 1,
      supersample: 0
    });
    //FIN Sketchfab

    // Funciones Propias
    //creadas para solo tener que llamarlas desde el .HTML
    function showAndHide(key) {
      const node = listedKeys[key].nodeName
      const group = listedKeys[key].kGroup
      const checkBox = document.getElementById(key);
      const checkGroup = document.getElementById(group);

      if (checkBox.checked == true && checkGroup.checked == true) {
        apiRef.show(idNodes[node]);
        if (key == "keyP") {displayArterias(true)};
        if (key == "keyR") {displayVenas(true)};
      }
      else {
        apiRef.hide(idNodes[node]);
        if (key == "keyP") {displayArterias(false)};
        if (key == "keyR") {displayVenas(false)};
      };
    };

    function displayArterias(show) {
      const keys = [ "keyQ1", "keyQ2", "keyQ3", "keyQ4", "keyQ5", "keyQ6", "keyQ7", "keyQ8" ];
      for (key of keys) {
        const node = listedKeys[key].nodeName
        if (show) { apiRef.show(idNodes[node]) }
        else      { apiRef.hide(idNodes[node]) }
      }
    }

    function displayVenas(show) {
      const keys = [ "keyS1", "keyS2", "keyS3" ];
      for (key of keys) {
        const node = listedKeys[key].nodeName
        if (show) { apiRef.show(idNodes[node]) }
        else      { apiRef.hide(idNodes[node]) }
      }
    }

    // Activa-Desactiva los grupos de botones
    function showGroup(groupId) {
      const checkGroup = document.getElementById(groupId);

      const group = [];
      switch(groupId) {
        case "key1":
          group.push( "keyY1", "keyY2", "keyY3", "keyY4" );
          break;
        case "key2":
          group.push( "keyB", "keyC", "keyD", "keyE", "keyF", "keyG", "keyH", "keyI", "keyJ", "keyK" );
          break;
        case "key3":
          group.push( "keyL", "keyM", "keyN", "keyO" );
          break;
        case "key4":
          group.push( "keyP", "keyR", "keyT", "keyU" );
          break;
        case "key5":
          group.push( "keyV", "keyW" );
          break;
      };

      for (const key of group) {
        const node = listedKeys[key].nodeName;
        const checkBox = document.getElementById(key);

        if (checkGroup.checked == true) {
          if (groupId == "key1" || checkBox.checked == true) {apiRef.show(idNodes[node])}
          if (key == "keyP" && checkBox.checked == true) {displayArterias(true)}
          if (key == "keyR" && checkBox.checked == true) {displayVenas(true)}
          if (groupId != "key1") {
            checkBox.disabled = false;
            labelsHTML[labelsFor[key]].style.color = 'blue';
          }
        }
        else {
          apiRef.hide(idNodes[node]);
          if (key == "keyP") {displayArterias(false)}
          if (key == "keyR") {displayVenas(false)}
          if (groupId != "key1") {
            checkBox.disabled = true;
            labelsHTML[labelsFor[key]].style.color = 'gray';
          }
        }
      }

    };

  </script>

<!-------------------------------------------------------------------------------------------------------------------------------------------------->
<!-- STYLE -->
<!-------------------------------------------------------------------------------------------------------------------------------------------------->
  <style type="text/css">
    body {
      margin: 0;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Para elegir opacidad de las imagenes de los logos */
    img {
      width: 100%;
      opacity: 0.8;
    }

    /* Para modificar posición y tamaño boton veterinaria UCM */
    .img-container1 {
      position: absolute;
      margin: 0px 5px;
      top: 45px;
      width: 150px;
      right: 0px;
    }

    /* Para modificar posición y tamaño Escudo UCM */
    .img-container2 {
      position: absolute;
      bottom: 22px;
      left: 22px;
      width: 122px;
    }

    /* Estilo de las etiquetas a la izquierda */
    .labelsLeft {
      position: absolute;
      margin: 5px 5px;
      width: 200px;
      left: 0;
      top: 50px;
      padding: 5px;
      z-index: 1;
      color: blue;
      background-color: white;
      opacity: 0.8;
      font-family: Arial, Helvetica, sans-serif;
      font-size: normal;
      line-height: 1
    }

    /* Estilo de la etiqueta que muestra el nombre del órgano donde se ha hecho click */
    .labelPick {
      display: block;
      color: red;
      font-weight: bold;
      text-align: center;
    }

    /* Estilo de la etiqueta que muestra la descripción del órgano donde se ha hecho click */
    .labelNote {
      display: block;
      color: black;
      font-weight: normal;
      text-align: left;
    }

    /* Estilo de las etiquetas del menú a la derecha */
    .labelsRight {
      position: absolute;
      margin: 5px 5px;
      right: 0;
      top: 80px;
      padding: 5px;
      z-index: 1;
      color: blue;
      background-color: white;
      opacity: 0.8;
      font-family: Arial, Helvetica, sans-serif;
      font-size: normal;
      line-height: 1
    }

    /* Para cambiar los espacios entre las líneas de botones */
    p {
      margin-top:    5px;
      margin-bottom: 0px;
    }

    button {
      height: 25px;
      line-height: 25px;
      text-transform: capitalize;
      color: white;
      opacity: 0.8;
      border: none;
      border-radius: 5px;
      text-align: center;
      vertical-align: middle;
      display: block;
      margin-top: 0px;
      background: #1caad9;
    }

    button:hover {opacity: 0.9;}
    button:active {opacity: 1;}

    #buttonA {width: 32%; display: inline;}
    #buttonB {width: 32%; display: inline;}
    #buttonC {width: 31%; display: inline;}

    /* Estilo de los botones de grupos */
    .check1 {
      cursor: pointer;
      background-color: white;
      color: white;
      width: 10px;
      height: 10px;
      appearance: none;
      border: 1px solid #888;
    }

    .check1:checked {
      background-color: blue;
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    }

    /* Estilo de los botones de órganos */
    .check2 {
      cursor: pointer;
      background-color: white;
      color: white;
      width: 10px;
      height: 10px;
      appearance: none;
      border: 1px solid #888;
      margin-left: 30px;
    }

    .check2:checked {
      background-color: blue;
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    }

    .check2:disabled {
      background-color: lightgray;
      background-image: none;
    }

    .check2:disabled:checked {
      background-color: lightgray;
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='black' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    }
  </style>

</body>
</html>
